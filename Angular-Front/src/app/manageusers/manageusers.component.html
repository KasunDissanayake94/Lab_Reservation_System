<app-slidebar></app-slidebar>
<div class="container" style="background-color: #e5e5e5;margin-top: 2%">
  <flash-messages></flash-messages>
  <br>
  <button id="addnewbtn" name="cancelButton" class="btn btn-default" (click)="adduser()" style="float: right" >Add new User</button>
  <br>
  <table class="table">
    <thead>
    <tr>
      <th scope="col">Username</th>
      <th scope="col">Name</th>
      <th scope="col">Email</th>
      <th scope="col">Type</th>
      <th scope="col">Edit User</th>
      <th scope="col">Delete User</th>
    </tr>
    </thead>
    <tbody>
    <tr *ngFor="let x of dataset">
      <td>{{x.username}}</td>
      <td>{{x.name}}</td>
      <td>{{x.email}}</td>
      <td>{{x.type}}</td>
      <td><button id="editbtn" name="cancelButton" class="btn btn-success" (click)="edituser(x.name,x.username,x.email,x.password,x.type)" >Edit</button></td>
      <td><button id="deletebtn" name="cancelButton" class="btn btn-danger" (click)="deleteuser(x.name,x.username,x.email,x.password,x.type)" >Delete</button></td>
    </tr>

    </tbody>
  </table>
  <!--Edit Model here-->

  <div class="backdrop" [ngStyle]="{'display':display}"></div>
  <div class="modal" tabindex="-1" role="dialog"  [ngStyle]="{'display':display}">
    <div class="modal-dialog modal-lg" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h4 class="modal-title">Edit User</h4>
          <button type="button" class="close" aria-label="Close" (click)="clsAssigned()"><span aria-hidden="true">&times;</span></button>
        </div>
        <div class="modal-body container">

          <form >
            <div class="form-group">
              <label for="usernameid1">Username</label>
              <input id="usernameid1" type="text" class="form-control" placeholder="Username" name="username" value="{{user.username}}" [(ngModel)]="user.username" required="required">
            </div>
            <div class="form-group">
              <label for="nameid1">Name</label>
              <input id="nameid1" type="text" class="form-control" placeholder="Full Name" name="name" [(ngModel)]="user.name" required="required">
            </div>
            <div class="form-group">
              <label for="emailid1">Email</label>
              <input id="emailid1" type="email" class="form-control" placeholder="Email" name="email" [(ngModel)]="user.email" required="required" disabled>
            </div>
            <div class="form-group">
              <label for="typeid1">Type</label>
              <select  id="typeid1" name="subject" [(ngModel)]="user.type" class="form-control" required="required" disabled>
                <option value="admin">Admin</option>
                <option value="lecturer">Lecturer</option>
                <option value="instructor">Instructor</option>
                <option value="student">Student</option>
                <option value="OTHER">OTHER</option>
              </select>
            </div>
            <div class="form-group">
              <label for="passwordid1">Password</label>
              <input id="passwordid1" type="password" class="form-control" placeholder="Password" name="password" [(ngModel)]="user.password" required="required">
            </div>
            <div class="form-group">
              <label for="conpasswordid">Confirm Password</label>
              <input id="conpasswordid" type="password" class="form-control" placeholder="Confirm Password" name="password" [(ngModel)]="user.confirmpassword" required="required">
            </div>
          </form>

          <div class="modal-footer">
            <button type="button" class="btn btn-success" (click)="EditUserData()" >Edit</button>
            <button type="button" class="btn btn-danger" (click)="clsAssigned()" >Close</button>
          </div>
        </div><!-- /.modal-content -->
      </div><!-- /.modal-dialog -->
    </div><!-- /.modal !-->
  </div>

  <!--Delete Model here-->

  <div class="backdrop" [ngStyle]="{'display':display2}"></div>
  <div class="modal" tabindex="-1" role="dialog"  [ngStyle]="{'display':display2}">
    <div class="modal-dialog modal-lg" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h4 class="modal-title">Delete User</h4>
          <button type="button" class="close" aria-label="Close" (click)="clsAssigned()"><span aria-hidden="true">&times;</span></button>
        </div>
        <div class="modal-body container">

            Are you sure you want to delete this user ??
        </div><!-- /.modal-content -->

          <div class="modal-footer">
            <button type="button" class="btn btn-success" (click)="DeleteUserData()" >Yes</button>
            <button type="button" class="btn btn-danger" (click)="clsAssigned()" >Close</button>
          </div>

      </div><!-- /.modal-dialog -->
    </div><!-- /.modal !-->
  </div>
  <!--Add User Model-->
  <div class="backdrop" [ngStyle]="{'display':display3}"></div>
  <div class="modal" tabindex="-1" role="dialog"  [ngStyle]="{'display':display3}">
    <div class="modal-dialog modal-lg" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h4 class="modal-title">Add New User</h4>
          <button type="button" class="close" aria-label="Close" (click)="clsAssigned()"><span aria-hidden="true">&times;</span></button>
        </div>
        <div class="modal-body container">

          <form >
            <div class="form-group">
              <label for="usernameid">Username</label>
              <input id="usernameid" type="text" class="form-control" placeholder="Username" name="username"  [(ngModel)]="user.username" required="required">
            </div>
            <div class="form-group">
              <label for="nameid">Name</label>
              <input id="nameid" type="text" class="form-control" placeholder="Full Name" name="name" [(ngModel)]="user.name" required="required">
            </div>
            <div class="form-group">
              <label for="emailid">Email</label>
              <input id="emailid" type="email" class="form-control" placeholder="Email" name="email" [(ngModel)]="user.email" required="required" >
            </div>
            <div class="form-group">
              <label for="type1id">Type</label>
              <select  id="type1id" name="subject" [(ngModel)]="user.type" class="form-control" required="required">
                <option value="admin">Admin</option>
                <option value="lecturer">Lecturer</option>
                <option value="instructor">Instructor</option>
                <option value="student">Student</option>
                <option value="OTHER">OTHER</option>
              </select>
            </div>
            <div class="form-group">
              <label for="passwordid">Password</label>
              <input id="passwordid" type="password" class="form-control" placeholder="Password" name="password" [(ngModel)]="user.password" required="required">
            </div>
            <div class="form-group">
              <label for="conpassid">Confirm Password</label>
              <input id="conpassid" type="password" class="form-control" placeholder="Confirm Paaword" name="password" [(ngModel)]="user.confirmpassword" required="required">
            </div>
          </form>

          <div class="modal-footer">
            <button type="button" class="btn btn-success" (click)="AddUserData()" >Add</button>
            <button type="button" class="btn btn-danger" (click)="clsAssigned()" >Close</button>
          </div>
        </div><!-- /.modal-content -->
      </div><!-- /.modal-dialog -->
    </div><!-- /.modal !-->
  </div>
</div>
